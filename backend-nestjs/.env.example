# ============================================
# Cal3 Backend Environment Configuration
# ============================================

# ============================================
# Application Configuration
# ============================================
NODE_ENV=development

# Smart Configuration - Only BASE_URL and ports needed!
# The application automatically constructs full URLs from these
BASE_URL=http://localhost      # Base URL (http://localhost, https://yourdomain.com, etc.)
FRONTEND_PORT=8080             # Frontend web interface (default: 8080)
BACKEND_PORT=8081              # Backend API (default: 8081)
PORT=8081                      # Alias for BACKEND_PORT (NestJS uses PORT)

# Optional: Override with full URLs if needed (for advanced deployments)
FRONTEND_URL=http://localhost:8080
BACKEND_URL=http://localhost:8081
API_URL=http://localhost:8081

# ============================================
# Database Configuration
# ============================================
DB_TYPE=postgres
DB_HOST=your-database-host
DB_PORT=5432
DB_USERNAME=your-db-username
DB_PASSWORD=your-db-password
DB_NAME=your-db-name
DB_SYNCHRONIZE=false

# For Azure PostgreSQL or other cloud providers:
# DB_SSL=true
# DB_SSL_REJECT_UNAUTHORIZED=false

# For local SQLite development (comment out PostgreSQL config above and uncomment below):
# DB_TYPE=sqlite

# ============================================
# Security
# ============================================
# IMPORTANT: Generate with: openssl rand -base64 32
# Minimum 32 characters required
JWT_SECRET=your-super-secret-jwt-key
JWT_ISSUER=cal3-backend
JWT_AUDIENCE=cal3-users
JWT_ACCESS_TTL=900s            # Access token lifetime (e.g., 900s, 15m)
JWT_REFRESH_TTL=1209600s       # Refresh token lifetime (default 14 days)
SECURITY_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
SECURITY_CORS_MAX_AGE=600
RATE_LIMIT_WINDOW_SEC=60
RATE_LIMIT_MAX_REQUESTS=120
LOGIN_MAX_ATTEMPTS=5
LOGIN_BLOCK_SECONDS=900
IDEMPOTENCY_DEFAULT_TTL_SEC=3600

# ============================================
# Google OAuth Configuration
# ============================================
# Get credentials from: https://console.cloud.google.com/
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
# Optional: Callback URL auto-constructed from BASE_URL:BACKEND_PORT if not provided
GOOGLE_CALLBACK_URL=http://localhost:8081/api/auth/google/callback
GOOGLE_CALENDAR_SYNC_CALLBACK_URL=http://localhost:8081/api/calendar-sync/callback/google

# ============================================
# Microsoft OAuth Configuration
# ============================================
# Get credentials from: https://portal.azure.com/
MICROSOFT_TENANT_ID=your-microsoft-tenant-id
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
# Optional: Callback URL auto-constructed from BASE_URL:BACKEND_PORT if not provided
MICROSOFT_CALLBACK_URL=http://localhost:8081/api/auth/microsoft/callback
MICROSOFT_CALENDAR_SYNC_CALLBACK_URL=http://localhost:8081/api/calendar-sync/callback/microsoft

# ============================================
# Feature Flags - Control which features are enabled
# ============================================
# Set to 'true' to enable, any other value (or undefined) to disable
ENABLE_OAUTH=true
ENABLE_CALENDAR_SYNC=true
ENABLE_RESERVATIONS=true
ENABLE_AUTOMATION=true
ENABLE_AGENT_INTEGRATIONS=true
ENABLE_TASKS=true
